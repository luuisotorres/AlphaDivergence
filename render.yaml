# Render Blueprint for AlphaDivergence
# This file enables one-click deployment to Render.com

services:
  # Backend API Service
  - type: web
    name: alphadivergence-backend
    runtime: docker
    dockerfilePath: ./backend/Dockerfile
    envVars:
      - key: ROOT_PATH
        value: /api
      - key: OPENAI_API_KEY
        sync: false  # User can optionally set this
      - key: GEMINI_API_KEY
        sync: false  # User can optionally set this
      - key: ETHERSCAN_API_KEY
        sync: false  # Optional
      - key: REDDIT_CLIENT_ID
        sync: false  # Optional
      - key: REDDIT_CLIENT_SECRET
        sync: false  # Optional
      - key: REDDIT_USER_AGENT
        value: AlphaDivergence/1.0
    healthCheckPath: /api/health
    autoDeploy: true

  # Frontend Static Site
  - type: web
    name: alphadivergence-frontend
    runtime: docker
    dockerfilePath: ./frontend/Dockerfile
    dockerContext: ./frontend
    dockerCommand: nginx -g 'daemon off;'
    envVars:
      - key: VITE_API_URL
        fromService:
          type: web
          name: alphadivergence-backend
          envVarKey: RENDER_EXTERNAL_URL
    autoDeploy: true
